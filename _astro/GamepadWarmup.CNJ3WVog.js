import{a as c,o as z,g as n,d as y,i as g,k as P,n as G,e as I,t as r}from"./web.C5iZSFJ7.js";var J=r('<h1 class="font-heading text-4xl sm:text-5xl"><b>Aim</b> the <b><!$><!/> trigger'),K=r("<p class=text-lg>and hold for <b><!$><!/> seconds!"),O=r('<div class="flex w-full"><div class="h-2 rounded-l bg-green-600 dark:bg-green-700"></div><div class="h-2 rounded-r bg-lime-400 dark:bg-lime-500">'),Q=r('<div class="w-full overflow-clip rounded-xl border-b-2 border-white bg-slate-200 inset-shadow-xs dark:border-slate-700 dark:bg-slate-900"><div class="h-8 bg-slate-900 dark:bg-slate-50">'),X=r('<div class="w-full space-y-3 text-center"><!$><!/><p class="text-left text-sm text-slate-400 select-none dark:text-slate-500">(DEBUG) Frame number: <!$><!/>'),Z=r('<h1 class="font-heading text-4xl font-bold sm:text-5xl">Welcome to GWS!'),ee=r("<p class=font-heading>Gamepad Warmup System"),te=r("<br>"),le=r("<p class=text-lg>Press any gamepad key to start"),ne=r('<h1 class="font-heading text-4xl font-bold sm:text-5xl">'),re=r("<p class=text-lg>");function se(o,m){return Math.random()*(m-o)+o}function L(o,m){const x=Math.ceil(o),C=Math.floor(m);return Math.floor(Math.random()*(C-x)+x)}const u=.025,q=["lt","rt"],E=[2,3,4,5],ae=2;function R(o){return{input:q[L(0,q.length)],value:o,holdTime:E[L(0,E.length)]}}function A(){return se(0+u,1-u)}function oe(){const[o,m]=c(1),[x,C]=c(!0),[W,F]=c(0),[H,T]=c(0),[l,U]=c(R(A())),[k,N]=c(null),[h,b]=c(null),p=()=>l().input==="lt"?W():H();let f=NaN;const _=s=>{m(t=>t+1);const $=navigator.getGamepads()[0];if($){C(!1);const t=$.axes,S=$.buttons;navigator.userAgent.includes("Firefox")?(F((t[4]+1)/2),T((t[5]+1)/2)):(F(S[6].value),T(S[7].value))}if(h()){if(s-h().time>ae*1e3){let t=A();for(;t>=l().value-u&&t<=l().value+u;)t=A();U(R(t)),N(null),b(null)}f=requestAnimationFrame(_);return}if(p()>=l().value-u&&p()<=l().value+u){k()===null?N(s):s-k()>=l().holdTime*1e3&&b({time:s,isSuccess:!0,description:`You reached the target and held for ${l().holdTime} seconds!`}),f=requestAnimationFrame(_);return}k()!==null&&(p()>l().value+u?b({time:s,isSuccess:!1,description:"You overshot"}):b({time:s,isSuccess:!1,description:"You undershot"})),f=requestAnimationFrame(_)};return f=requestAnimationFrame(_),z(()=>{cancelAnimationFrame(f)}),(()=>{var s=n(X),$=s.firstChild,[t,S]=y($.nextSibling),M=t.nextSibling,V=M.firstChild,Y=V.nextSibling,[B,D]=y(Y.nextSibling);return g(s,P(G,{get when(){return!x()},get fallback(){return[n(Z),n(ee),n(te),n(le)]},get children(){return[P(G,{get when(){return!h()},get fallback(){return[(()=>{var e=n(ne);return g(e,()=>h().isSuccess?"SUCCESS!":"FAIL!"),e})(),(()=>{var e=n(re);return g(e,()=>h().description),e})()]},get children(){return[(()=>{var e=n(J),a=e.firstChild,i=a.nextSibling,d=i.nextSibling,v=d.firstChild,[w,j]=y(v.nextSibling);return w.nextSibling,g(d,()=>l().input==="lt"?"left":"right",w,j),e})(),(()=>{var e=n(K),a=e.firstChild,i=a.nextSibling,d=i.firstChild,[v,w]=y(d.nextSibling);return v.nextSibling,g(i,()=>l().holdTime,v,w),e})()]}}),(()=>{var e=n(O),a=e.firstChild,i=a.nextSibling;return i.style.setProperty("width","5%"),I(d=>(d=`${(l().value-u)*100}%`)!=null?a.style.setProperty("width",d):a.style.removeProperty("width")),e})(),(()=>{var e=n(Q),a=e.firstChild;return I(i=>(i=`${p()*100}%`)!=null?a.style.setProperty("width",i):a.style.removeProperty("width")),e})()]}}),t,S),g(M,o,B,D),s})()}export{oe as default};
