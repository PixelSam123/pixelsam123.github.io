import{c,o as J,g as n,a as C,i as d,b as G,t as r,q as I,v as k,e as L}from"./web.BpFg5q7N.js";var K=r('<h1 class="font-heading text-4xl sm:text-5xl"><b>Aim</b> the <b><!$><!/> trigger'),O=r("<p class=text-lg>and hold for <b><!$><!/> seconds!"),Q=r('<div class="flex w-full"><div class="h-2 rounded-l bg-green-600 dark:bg-green-700"></div><div class="h-2 rounded-r bg-lime-400 dark:bg-lime-500">'),X=r('<div class="w-full overflow-clip rounded-xl border-b-2 border-white bg-slate-200 inset-shadow-xs dark:border-slate-700 dark:bg-slate-900"><div class="h-8 bg-slate-900 dark:bg-slate-50">'),Z=r('<div class="w-full space-y-3 text-center"><!$><!/><p class="text-left text-sm text-slate-400 select-none dark:text-slate-500">(DEBUG) Frame number: <!$><!/>'),ee=r('<h1 class="font-heading text-4xl font-bold sm:text-5xl">Welcome to GWS!'),te=r("<p class=font-heading>Gamepad Warmup System"),le=r("<br>"),ne=r("<p class=text-lg>Press any gamepad key to start"),re=r('<h1 class="font-heading text-4xl font-bold sm:text-5xl">'),ae=r("<p class=text-lg>");function se(s,g){return Math.random()*(g-s)+s}function E(s,g){const x=Math.ceil(s),A=Math.floor(g);return Math.floor(Math.random()*(A-x)+x)}const o=.025,R=["lt","rt"],W=[2,3,4,5],ie=2;function H(s){return{input:R[E(0,R.length)],value:s,holdTime:W[E(0,W.length)]}}function T(){return se(0+o,1-o)}function ue(){const[s,g]=c(1),[x,A]=c(!0),[U,y]=c(0),[V,N]=c(0),[l,Y]=c(H(T())),[F,M]=c(null),[m,_]=c(null),b=()=>l().input==="lt"?U():V();let f=NaN;const p=a=>{g(t=>t+1);const h=navigator.getGamepads()[0];if(h){A(!1);const t=h.axes,S=h.buttons;navigator.userAgent.includes("Firefox")?(y((t[4]+1)/2),N((t[5]+1)/2)):(y(S[6].value),N(S[7].value))}if(m()){if(a-m().time>ie*1e3){let t=T();for(;t>=l().value-o&&t<=l().value+o;)t=T();Y(H(t)),M(null),_(null)}f=requestAnimationFrame(p);return}if(b()>=l().value-o&&b()<=l().value+o){F()===null?M(a):a-F()>=l().holdTime*1e3&&_({time:a,isSuccess:!0,description:`You reached the target and held for ${l().holdTime} seconds!`}),f=requestAnimationFrame(p);return}F()!==null&&(b()>l().value+o?_({time:a,isSuccess:!1,description:"You overshot"}):_({time:a,isSuccess:!1,description:"You undershot"})),f=requestAnimationFrame(p)};return f=requestAnimationFrame(p),J(()=>{cancelAnimationFrame(f)}),(()=>{var a=n(Z),h=a.firstChild,[t,S]=C(h.nextSibling),q=t.nextSibling,P=q.firstChild,B=P.nextSibling,[D,j]=C(B.nextSibling);return d(a,G(I,{get when(){return!x()},get fallback(){return[n(ee),n(te),n(le),n(ne)]},get children(){return[G(I,{get when(){return!m()},get fallback(){return[(()=>{var e=n(re);return d(e,()=>m().isSuccess?"SUCCESS!":"FAIL!"),e})(),(()=>{var e=n(ae);return d(e,()=>m().description),e})()]},get children(){return[(()=>{var e=n(K),i=e.firstChild,u=i.nextSibling,$=u.nextSibling,v=$.firstChild,[w,z]=C(v.nextSibling);return w.nextSibling,d($,()=>l().input==="lt"?"left":"right",w,z),e})(),(()=>{var e=n(O),i=e.firstChild,u=i.nextSibling,$=u.firstChild,[v,w]=C($.nextSibling);return v.nextSibling,d(u,()=>l().holdTime,v,w),e})()]}}),(()=>{var e=n(Q),i=e.firstChild,u=i.nextSibling;return k(u,"width","5%"),L($=>k(i,"width",`${(l().value-o)*100}%`)),e})(),(()=>{var e=n(X),i=e.firstChild;return L(u=>k(i,"width",`${b()*100}%`)),e})()]}}),t,S),d(q,s,D,j),a})()}export{ue as default};
