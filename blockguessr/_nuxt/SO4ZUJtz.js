import{R as H,O as K,L as B,a5 as V,a6 as Q,r as E,V as Y,E as W,Q as X,o as Z,a4 as J,I as ee,i as te,K as ne}from"./VM11WSMq.js";function C(e){return H()?(K(e),!0):!1}function x(e){return typeof e=="function"?e():X(e)}const D=typeof window<"u"&&typeof document<"u",re=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope,oe=Object.prototype.toString,ae=e=>oe.call(e)==="[object Object]",q=()=>{};function ie(e,t){function n(...o){return new Promise((a,i)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(a).catch(i)})}return n}const z=e=>e();function se(e=z){const t=E(!0);function n(){t.value=!1}function o(){t.value=!0}const a=(...i)=>{t.value&&e(...i)};return{isActive:V(t),pause:n,resume:o,eventFilter:a}}function ue(e){return ee()}function le(...e){if(e.length!==1)return B(...e);const t=e[0];return typeof t=="function"?V(Q(()=>({get:t,set:q}))):E(t)}function ce(e,t,n={}){const{eventFilter:o=z,...a}=n;return W(e,ie(o,t),a)}function fe(e,t,n={}){const{eventFilter:o,...a}=n,{eventFilter:i,pause:f,resume:m,isActive:y}=se(o);return{stop:ce(e,t,{...a,eventFilter:i}),pause:f,resume:m,isActive:y}}function de(e,t=!0,n){ue()?Z(e,n):t?e():J(e)}function U(e,t=1e3,n={}){const{immediate:o=!0,immediateCallback:a=!1}=n;let i=null;const f=E(!1);function m(){i&&(clearInterval(i),i=null)}function y(){f.value=!1,m()}function d(){const l=x(t);l<=0||(f.value=!0,a&&e(),m(),i=setInterval(e,l))}if(o&&D&&d(),Y(t)||typeof t=="function"){const l=W(t,()=>{f.value&&D&&d()});C(l)}return C(y),{isActive:f,pause:y,resume:d}}const $=D?window:void 0;function me(e){var t;const n=x(e);return(t=n==null?void 0:n.$el)!=null?t:n}function P(...e){let t,n,o,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,a]=e,t=$):[t,n,o,a]=e,!t)return q;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],f=()=>{i.forEach(l=>l()),i.length=0},m=(l,s,w,g)=>(l.addEventListener(s,w,g),()=>l.removeEventListener(s,w,g)),y=W(()=>[me(t),x(a)],([l,s])=>{if(f(),!l)return;const w=ae(s)?{...s}:s;i.push(...n.flatMap(g=>o.map(F=>m(l,g,F,w))))},{immediate:!0,flush:"post"}),d=()=>{y(),f()};return C(d),d}function pe(e,t={}){const{immediate:n=!0,fpsLimit:o=void 0,window:a=$}=t,i=E(!1),f=o?1e3/o:null;let m=0,y=null;function d(w){if(!i.value||!a)return;m||(m=w);const g=w-m;if(f&&g<f){y=a.requestAnimationFrame(d);return}m=w,e({delta:g,timestamp:w}),y=a.requestAnimationFrame(d)}function l(){!i.value&&a&&(i.value=!0,m=0,y=a.requestAnimationFrame(d))}function s(){i.value=!1,y!=null&&a&&(a.cancelAnimationFrame(y),y=null)}return n&&l(),C(s),{isActive:V(i),pause:s,resume:l}}const R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},L="__vueuse_ssr_handlers__",ve=we();function we(){return L in R||(R[L]=R[L]||{}),R[L]}function ye(e,t){return ve[e]||t}function ge(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const he={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},k="vueuse-storage";function Se(e,t,n,o={}){var a;const{flush:i="pre",deep:f=!0,listenToStorageChanges:m=!0,writeDefaults:y=!0,mergeDefaults:d=!1,shallow:l,window:s=$,eventFilter:w,onError:g=r=>{console.error(r)},initOnMounted:F}=o,S=(l?ne:E)(t);if(!n)try{n=ye("getDefaultStorage",()=>{var r;return(r=$)==null?void 0:r.localStorage})()}catch(r){g(r)}if(!n)return S;const u=x(t),p=ge(u),b=(a=o.serializer)!=null?a:he[p],{pause:A,resume:T}=fe(S,()=>I(S.value),{flush:i,deep:f,eventFilter:w});s&&m&&de(()=>{n instanceof Storage?P(s,"storage",O):P(s,k,v),F&&O()}),F||O();function N(r,c){if(s){const h={key:e,oldValue:r,newValue:c,storageArea:n};s.dispatchEvent(n instanceof Storage?new StorageEvent("storage",h):new CustomEvent(k,{detail:h}))}}function I(r){try{const c=n.getItem(e);if(r==null)N(c,null),n.removeItem(e);else{const h=b.write(r);c!==h&&(n.setItem(e,h),N(c,h))}}catch(c){g(c)}}function _(r){const c=r?r.newValue:n.getItem(e);if(c==null)return y&&u!=null&&n.setItem(e,b.write(u)),u;if(!r&&d){const h=b.read(c);return typeof d=="function"?d(h,u):p==="object"&&!Array.isArray(h)?{...u,...h}:h}else return typeof c!="string"?c:b.read(c)}function O(r){if(!(r&&r.storageArea!==n)){if(r&&r.key==null){S.value=u;return}if(!(r&&r.key!==e)){A();try{(r==null?void 0:r.newValue)!==b.write(S.value)&&(S.value=_(r))}catch(c){g(c)}finally{r?J(T):T()}}}}function v(r){O(r.detail)}return S}function Te(e,t,n={}){const{window:o=$}=n;return Se(e,t,o==null?void 0:o.localStorage,n)}function be(e={}){const{controls:t=!1,interval:n="requestAnimationFrame"}=e,o=E(new Date),a=()=>o.value=new Date,i=n==="requestAnimationFrame"?pe(a,{immediate:!0}):U(a,n,{immediate:!0});return t?{now:o,...i}:o}const Ae=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:Number.POSITIVE_INFINITY,value:31536e6,name:"year"}],Fe={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function Ee(e){return e.toISOString().slice(0,10)}function De(e,t={}){const{controls:n=!1,updateInterval:o=3e4}=t,{now:a,...i}=be({interval:o,controls:!0}),f=te(()=>Ne(new Date(x(e)),t,x(a)));return n?{timeAgo:f,...i}:f}function Ne(e,t={},n=Date.now()){var o;const{max:a,messages:i=Fe,fullDateFormatter:f=Ee,units:m=Ae,showSecond:y=!1,rounding:d="round"}=t,l=typeof d=="number"?u=>+u.toFixed(d):Math[d],s=+n-+e,w=Math.abs(s);function g(u,p){return l(Math.abs(u)/p.value)}function F(u,p){const b=g(u,p),A=u>0,T=S(p.name,b,A);return S(A?"past":"future",T,A)}function S(u,p,b){const A=i[u];return typeof A=="function"?A(p,b):A.replace("{0}",p.toString())}if(w<6e4&&!y)return i.justNow;if(typeof a=="number"&&w>a)return f(new Date(e));if(typeof a=="string"){const u=(o=m.find(p=>p.name===a))==null?void 0:o.max;if(u&&w>u)return f(new Date(e))}for(const[u,p]of m.entries()){if(g(s,p)<=0&&m[u-1])return F(s,m[u-1]);if(w<p.max)return F(s,p)}return i.invalid}const G="ping";function j(e){return e===!0?{}:e}function xe(e,t={}){const{onConnected:n,onDisconnected:o,onError:a,onMessage:i,immediate:f=!0,autoClose:m=!0,protocols:y=[]}=t,d=E(null),l=E("CLOSED"),s=E(),w=le(e);let g,F,S=!1,u=0,p=[],b;const A=()=>{if(p.length&&s.value&&l.value==="OPEN"){for(const v of p)s.value.send(v);p=[]}},T=()=>{clearTimeout(b),b=void 0},N=(v=1e3,r)=>{!D||!s.value||(S=!0,T(),g==null||g(),s.value.close(v,r),s.value=void 0)},I=(v,r=!0)=>!s.value||l.value!=="OPEN"?(r&&p.push(v),!1):(A(),s.value.send(v),!0),_=()=>{if(S||typeof w.value>"u")return;const v=new WebSocket(w.value,y);s.value=v,l.value="CONNECTING",v.onopen=()=>{l.value="OPEN",u=0,n==null||n(v),F==null||F(),A()},v.onclose=r=>{if(l.value="CLOSED",o==null||o(v,r),!S&&t.autoReconnect&&v===s.value){const{retries:c=-1,delay:h=1e3,onFailed:M}=j(t.autoReconnect);typeof c=="number"&&(c<0||u<c)?(u+=1,setTimeout(_,h)):typeof c=="function"&&c()?setTimeout(_,h):M==null||M()}},v.onerror=r=>{a==null||a(v,r)},v.onmessage=r=>{if(t.heartbeat){T();const{message:c=G,responseMessage:h=c}=j(t.heartbeat);if(r.data===h)return}d.value=r.data,i==null||i(v,r)}};if(t.heartbeat){const{message:v=G,interval:r=1e3,pongTimeout:c=1e3}=j(t.heartbeat),{pause:h,resume:M}=U(()=>{I(v,!1),b==null&&(b=setTimeout(()=>{N(),S=!1},c))},r,{immediate:!1});g=h,F=M}m&&(D&&P("beforeunload",()=>N()),C(N));const O=()=>{!D&&!re||(N(),S=!1,u=0,_())};return f&&O(),W(w,O),{data:d,status:l,close:N,send:I,open:O,ws:s}}export{xe as a,De as b,Te as u};
