import{c,o as J,g as n,a as C,i as d,b as I,t as r,S as L,h as k,e as q}from"./web.CNe7Nk8j.js";var K=r('<h1 class="font-heading text-4xl sm:text-5xl"><b>Aim</b> the <b><!$><!/> trigger'),O=r("<p class=text-lg>and hold for <b><!$><!/> seconds!"),Q=r('<div class="flex w-full"><div class="h-2 rounded-l bg-green-600 dark:bg-green-700"></div><div class="h-2 rounded-r bg-lime-400 dark:bg-lime-500">'),X=r('<div class="w-full overflow-clip rounded-xl border-b-2 border-white bg-stone-200 inset-shadow-xs dark:border-slate-700 dark:bg-slate-900"><div class="h-8 bg-slate-900 dark:bg-slate-50">'),Z=r('<div class="w-full space-y-3 text-center"><!$><!/><p class="text-left text-sm text-stone-400 select-none dark:text-slate-500">(DEBUG) Frame number: <!$><!/>'),ee=r('<h1 class="font-heading text-4xl font-bold sm:text-5xl">Welcome to GWS!'),te=r("<p class=font-heading>Gamepad Warmup System"),le=r("<br>"),ne=r("<p class=text-lg>Press any gamepad key to start"),re=r('<h1 class="font-heading text-4xl font-bold sm:text-5xl">'),se=r("<p class=text-lg>");function ae(a,g){return Math.random()*(g-a)+a}function E(a,g){const x=Math.ceil(a),A=Math.floor(g);return Math.floor(Math.random()*(A-x)+x)}const o=.025,R=["lt","rt"],W=[2,3,4,5],ie=2;function H(a){return{input:R[E(0,R.length)],value:a,holdTime:W[E(0,W.length)]}}function T(){return ae(0+o,1-o)}function ue(){const[a,g]=c(1),[x,A]=c(!0),[U,y]=c(0),[V,N]=c(0),[l,Y]=c(H(T())),[F,M]=c(null),[m,_]=c(null),b=()=>l().input==="lt"?U():V();let h=NaN;const p=s=>{g(t=>t+1);const f=navigator.getGamepads()[0];if(f){A(!1);const t=f.axes,S=f.buttons;navigator.userAgent.includes("Firefox")?(y((t[4]+1)/2),N((t[5]+1)/2)):(y(S[6].value),N(S[7].value))}if(m()){if(s-m().time>ie*1e3){let t=T();for(;t>=l().value-o&&t<=l().value+o;)t=T();Y(H(t)),M(null),_(null)}h=requestAnimationFrame(p);return}if(b()>=l().value-o&&b()<=l().value+o){F()===null?M(s):s-F()>=l().holdTime*1e3&&_({time:s,isSuccess:!0,description:`You reached the target and held for ${l().holdTime} seconds!`}),h=requestAnimationFrame(p);return}F()!==null&&(b()>l().value+o?_({time:s,isSuccess:!1,description:"You overshot"}):_({time:s,isSuccess:!1,description:"You undershot"})),h=requestAnimationFrame(p)};return h=requestAnimationFrame(p),J(()=>{cancelAnimationFrame(h)}),(()=>{var s=n(Z),f=s.firstChild,[t,S]=C(f.nextSibling),G=t.nextSibling,P=G.firstChild,B=P.nextSibling,[D,j]=C(B.nextSibling);return d(s,I(L,{get when(){return!x()},get fallback(){return[n(ee),n(te),n(le),n(ne)]},get children(){return[I(L,{get when(){return!m()},get fallback(){return[(()=>{var e=n(re);return d(e,()=>m().isSuccess?"SUCCESS!":"FAIL!"),e})(),(()=>{var e=n(se);return d(e,()=>m().description),e})()]},get children(){return[(()=>{var e=n(K),i=e.firstChild,u=i.nextSibling,$=u.nextSibling,v=$.firstChild,[w,z]=C(v.nextSibling);return w.nextSibling,d($,()=>l().input==="lt"?"left":"right",w,z),e})(),(()=>{var e=n(O),i=e.firstChild,u=i.nextSibling,$=u.firstChild,[v,w]=C($.nextSibling);return v.nextSibling,d(u,()=>l().holdTime,v,w),e})()]}}),(()=>{var e=n(Q),i=e.firstChild,u=i.nextSibling;return k(u,"width","5%"),q($=>k(i,"width",`${(l().value-o)*100}%`)),e})(),(()=>{var e=n(X),i=e.firstChild;return q(u=>k(i,"width",`${b()*100}%`)),e})()]}}),t,S),d(G,a,D,j),s})()}export{ue as default};
